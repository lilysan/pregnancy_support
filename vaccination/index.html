<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/html">
<head>
    <meta charset="UTF-8">
    <title>Vaccination | Pregnancy Support</title>
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <link rel="stylesheet" href="../reset.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-9ndCyUaIbzAi2FUVXJi0CjmCapSmO7SnpJef0486qhLnuZ2cdeRhO02iuK6FUUVM" crossorigin="anonymous">
    <link rel="stylesheet" href="../style.css">
</head>
<body>
<div class="container mb-5">
    <div class="loader">
        <div class="text-center">
            <div class="spinner-border" role="status">
                <span class="visually-hidden">Loading...</span>
            </div>
        </div>
    </div>

    <h1 class="title_vaccination mt-3"></h1>
    <p class="lead">（自身の予防接種記録）</p>

    <form>
        <!-- インフルエンザ -->
        <fieldset class="mb-4">
            <legend><span class="title_flu"></span> （インフルエンザ）</legend>
            <div class="form-check">
                <input class="form-check-input" type="radio" name="influenza" id="influenzaYes" value="yes">
                <label for="influenzaYes"><span class="form-check-label yes"></span> （接種済み）</label>
            </div>
            <div class="form-check">
                <input class="form-check-input" type="radio" name="influenza" id="influenzaNo" value="no">
                <label for="influenzaNo"><span class="form-check-labeln no"></span> （未接種）</label>
            </div>
            <div class="form-check">
                <input class="form-check-input" type="radio" name="influenza" id="influenzaUnknown" value="unknown">
                <label for="influenzaUnknown"><span class="form-check-label unknown"></span> （不明）</label>
            </div>
        </fieldset>

        <!-- ジフテリア -->
        <fieldset class="mb-4">
            <legend><span class="title_diphtheria"></span> （ジフテリア）</legend>
            <div class="form-check">
                <input class="form-check-input" type="radio" name="diphtheria" id="diphtheriaYes" value="yes">
                <label for="diphtheriaYes"><span class="form-check-label yes"></span> （接種済み）</label>
            </div>
            <div class="form-check">
                <input class="form-check-input" type="radio" name="diphtheria" id="diphtheriaNo" value="no">
                <label for="diphtheriaNo"><span class="form-check-label no"></span> （未接種）</label>
            </div>
            <div class="form-check">
                <input class="form-check-input" type="radio" name="diphtheria" id="diphtheriaUnknown" value="unknown">
                <label for="diphtheriaUnknown"><span class="form-check-label unknown"></span> （不明）</label>
            </div>
        </fieldset>

        <!-- 破傷風 -->
        <fieldset class="mb-4">
            <legend><span class="title_tetanus"></span> （破傷風）</legend>
            <div class="form-check">
                <input class="form-check-input" type="radio" name="tetanus" id="tetanusYes" value="yes">
                <label for="tetanusYes"><span class="form-check-label yes"></span> （接種済み）</label>
            </div>
            <div class="form-check">
                <input class="form-check-input" type="radio" name="tetanus" id="tetanusNo" value="no">
                <label for="tetanusNo"><span class="form-check-label no"></span> （未接種）</label>
            </div>
            <div class="form-check">
                <input class="form-check-input" type="radio" name="tetanus" id="tetanusUnknown" value="unknown">
                <label for="tetanusUnknown"><span class="form-check-label unknown"></span> （不明）</label>
            </div>
        </fieldset>

        <!-- 百日咳ワクチン -->
        <fieldset class="mb-4">
            <legend><span class="title_pertussis"></span> （百日咳）</legend>
            <div class="form-check">
                <input class="form-check-input" type="radio" name="pertussis" id="pertussisYes" value="yes">
                <label for="pertussisYes"><span class="form-check-label yes"></span> （接種済み）</label>
            </div>
            <div class="form-check">
                <input class="form-check-input" type="radio" name="pertussis" id="pertussisNo" value="no">
                <label for="pertussisNo"><span class="form-check-label no"></span> （未接種）</label>
            </div>
            <div class="form-check">
                <input class="form-check-input" type="radio" name="pertussis" id="pertussisUnknown" value="unknown">
                <label for="pertussisUnknown"><span class="form-check-label unknown"></span> （不明）</label>
            </div>
        </fieldset>

        <!-- 保存ボタン -->
        <button type="button" class="btn btn-primary btn_save">Save</button>
        <p>* Data will not be saved as this is a sample. （サンプルのため、入力されたデータは保存されません。）</p>
    </form>
</div>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js" integrity="sha384-geWF76RCwLtnZ8qwWowPQNguL3RmwHVBC9FhGdlKrxdiJJigb/j/68SIy3Te4Bkz" crossorigin="anonymous"></script>
<script charset="utf-8" src="https://static.line-scdn.net/liff/edge/2/sdk.js"></script>
<script>
    const API_URL = "https://script.google.com/macros/s/AKfycbyUUS9qijnORQTAxUzVXLlsDigodcNn-uANaFjQpiRXqS5mQcIFlNRWYerSkzELOc5d/exec";
    const LIFF_ID = "2005594923-wN8OjyGd";

    liff.init({
        liffId: LIFF_ID, // Use own liffId
        withLoginOnExternalBrowser: true, // Enable automatic login process
    }).then(() => {
        // Start to use liff's api
        const idToken = liff.getIDToken();
        const lang = liff.getAppLanguage();

        changeLanguage(lang);
        getVaccination(idToken);

        $(".btn_save").on("click", function(e){

        });

    }).catch((err) => {
        // Error happens during initialization
        liff.logout();
        alert("LIFF init failed.");
    });
    
    const getAccessObj = (data) => {
        return {
            url: API_URL,
            type: "POST",
            dataType: "json",
            data: JSON.stringify(data),
            timeout: 30000,
        }
    }

    function getVaccination(idToken){
        $(".loader").hide();
    }

    function changeLanguage(lang){
        const knownLang = ["en"];
        lang = knownLang.includes(lang) ? lang : "en";

        $.getJSON("lang.json", (data) => {
            $.each(data, function (index, val) {
                const elm = $("." + val.class);
                if(elm.length) {
                    if (val.type === "docs") {
                        elm.html(val[lang]);
                    } else if (val.type === "placeholder") {
                        elm.attr("placeholder", val[lang]);
                    }
                }
            });
        });
    }

</script>
</body>
</html>