<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/html">
<head>
    <meta charset="UTF-8">
    <title>Birth Plan | Pregnancy Support</title>
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <link rel="stylesheet" href="../reset.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-9ndCyUaIbzAi2FUVXJi0CjmCapSmO7SnpJef0486qhLnuZ2cdeRhO02iuK6FUUVM" crossorigin="anonymous">
    <link rel="stylesheet" href="../style.css">
</head>
<body>
<div class="container mb-5">
    <div class="loader">
        <div class="text-center">
            <div class="spinner-border" role="status">
                <span class="visually-hidden">Loading...</span>
            </div>
        </div>
    </div>

    <h1 class="title_birthplan mt-3">Birth Plan</h1>

    <form>
        <!-- カテゴリ1：出産のとき -->
        <fieldset class="mb-4">
            <legend class="title_delivery">出産のとき</legend>
            <div class="form-check">
                <input class="form-check-input" type="checkbox" id="noPainDelivery">
                <label class="form-check-label no_pain" for="noPainDelivery">無痛分娩をしたい</label>
            </div>
            <div class="form-check">
                <input class="form-check-input" type="checkbox" id="partnerPresent">
                <label class="form-check-label partner" for="partnerPresent">パートナーと一緒にいたい</label>
            </div>
            <div class="form-check">
                <input class="form-check-input" type="checkbox" id="prayDuringBirth">
                <label class="form-check-label pray" for="prayDuringBirth">お祈りをしたい</label>
            </div>
            <div class="form-check">
                <input class="form-check-input" type="checkbox" id="aromatherapy">
                <label class="form-check-label aroma" for="aromatherapy">アロマテラピーをしたい</label>
            </div>
            <div class="form-check">
                <input class="form-check-input" type="checkbox" id="recordBirth">
                <label class="form-check-label record" for="recordBirth">赤ちゃんが生まれるときビデオを撮りたい</label>
            </div>
            <div class="mb-3">
                <label for="otherRequestsBirth" class="form-label other">そのほかの希望</label>
                <textarea class="form-control" id="otherRequestsBirth" rows="3"></textarea>
            </div>
        </fieldset>

        <!-- カテゴリ2：出産のあと -->
        <fieldset class="mb-4">
            <legend class="title_after">出産のあと</legend>
            <div class="form-check">
                <input class="form-check-input" type="checkbox" id="noPork">
                <label class="form-check-label no_pork" for="noPork">豚肉はたべない</label>
            </div>
            <div class="form-check">
                <input class="form-check-input" type="checkbox" id="familySoup">
                <label class="form-check-label soup" for="familySoup">家族がつくったスープをのみたい</label>
            </div>
            <div class="form-check">
                <input class="form-check-input" type="checkbox" id="noShower">
                <label class="form-check-label no_shower" for="noShower">シャワーをあびない</label>
            </div>
            <div class="form-check">
                <input class="form-check-input" type="checkbox" id="prayAfterBirth">
                <label class="form-check-label pray" for="prayAfterBirth">お祈りをしたい</label>
            </div>
            <div class="mb-3">
                <label for="otherRequestsAfter" class="form-label other">そのほかの希望</label>
                <textarea class="form-control" id="otherRequestsAfter" rows="3"></textarea>
            </div>
        </fieldset>

        <!-- カテゴリ3：赤ちゃんのこと -->
        <fieldset class="mb-4">
            <legend class="title_baby">赤ちゃんのこと</legend>
            <div class="form-check">
                <input class="form-check-input" type="checkbox" id="noMilk">
                <label class="form-check-label no_milk" for="noMilk">ミルクはあげない</label>
            </div>
            <div class="form-check">
                <input class="form-check-input" type="checkbox" id="ownMilk">
                <label class="form-check-label own_milk" for="ownMilk">もってきたミルクをあげたい</label>
            </div>
            <div class="form-check">
                <input class="form-check-input" type="checkbox" id="holdBabyImmediately">
                <label class="form-check-label hold" for="holdBabyImmediately">生まれたらすぐにだっこしたい</label>
            </div>
            <div class="mb-3">
                <label for="otherRequestsBaby" class="form-label other">そのほかの希望</label>
                <textarea class="form-control" id="otherRequestsBaby" rows="3"></textarea>
            </div>
        </fieldset>

        <!-- 保存ボタン -->
        <button type="button" class="btn btn-primary btn_save">Save</button>
        <p>* Data will not be saved as this is a sample.</p>
    </form>
</div>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js" integrity="sha384-geWF76RCwLtnZ8qwWowPQNguL3RmwHVBC9FhGdlKrxdiJJigb/j/68SIy3Te4Bkz" crossorigin="anonymous"></script>
<script charset="utf-8" src="https://static.line-scdn.net/liff/edge/2/sdk.js"></script>
<script>
    const API_URL = "https://script.google.com/macros/s/AKfycbyUUS9qijnORQTAxUzVXLlsDigodcNn-uANaFjQpiRXqS5mQcIFlNRWYerSkzELOc5d/exec";
    const LIFF_ID = "2005594923-wN8OjyGd";

    liff.init({
        liffId: LIFF_ID, // Use own liffId
        withLoginOnExternalBrowser: true, // Enable automatic login process
    }).then(() => {
        // Start to use liff's api
        const idToken = liff.getIDToken();
        const lang = liff.getAppLanguage();

        changeLanguage(lang);
        getBirthPlan(idToken);

        $(".btn_save").on("click", function(e){

        });

    }).catch((err) => {
        // Error happens during initialization
        liff.logout();
        alert("LIFF init failed.");
    });
    
    const getAccessObj = (data) => {
        return {
            url: API_URL,
            type: "POST",
            dataType: "json",
            data: JSON.stringify(data),
            timeout: 30000,
        }
    }

    function getBirthPlan(idToken){
        $(".loader").hide();
    }

    function changeLanguage(lang){
        const knownLang = ["ja", "en"];
        lang = knownLang.includes(lang) ? lang : "en";

        $.getJSON("lang.json", (data) => {
            $.each(data, function (index, val) {
                const elm = $("." + val.class);
                if(elm.length) {
                    if (val.type === "docs") {
                        elm.html(val[lang]);
                    } else if (val.type === "placeholder") {
                        elm.attr("placeholder", val[lang]);
                    }
                }
            });
        });
    }

</script>
</body>
</html>